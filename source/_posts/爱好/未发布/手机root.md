---
title: 小米与魅族手机root通用方法
categories:
- 爱好
tags:
- 手机root
abbrlink: 6390
---
# 手机ROOT
工具
- 小米助手
- 小米
## 手机硬件
## 手机系统
## 基本概念

| 概念       | 作用 |
| ---------- | ---- |
| BootLoader |      |
| Recovery   |      |
| Fastboot   |      |
[手把手教你搭建完美的 Android 搞机/逆向环境-技术圈](https://jishuin.proginn.com/p/763bfbd23d56)
## 基本概念
### ROM
### BootLoader（启动加载）锁
[【科普向】Android手机的BL锁到底是什么东东 - 哔哩哔哩](https://www.bilibili.com/read/cv307758/)
BootLoader(引导系统启动的引导程序)
BootLoader
- 在嵌入式操作系统中，BootLoader是在操作系统内核运行之前运行，它可以初始化硬件设备、建立内存空间映射图，从而将系统的软硬件环境带到一个合适状态，以便为最终调用操作系统内核准备好正确的环境。
BootLoader锁
- 锁其实是厂商为了普通用户的安全考虑而设下的一个门槛（比如被奸商塞了后门再卖、被恶意诱导进行一些高危操作等），它会在Bootloader引导启动时检测即将被启动的东西（recovery.img / boot.img）的签名是否是厂商的，如果不是的话就拒绝启动。（不解了这个锁，是无法进行刷机操作的）
- 
解锁方法
上锁方法
### Recovery(卡刷)
Recovery相当于是以前那种Windows PE U盘，我们能通过它像使用Ghost进行重装系统（直接恢复镜像到指定分区）一样刷机。
因为是读取闪存（以前的SD卡）中的刷机包进行刷机的，所以在这里进行刷机操作通常又被称为“卡刷”。
通常每个厂商都会自己搞一套Recovery，而部分厂商会因为自己的用户群体中大多是不懂技术的普通用户，而将自己的Recovery做成一个必须要依靠自家应用配合的傻瓜式工具，这种情况你多半是不能使用它刷一些第三方的东西进去的，只能替换掉。
第三方Recovery（如TWRP）通常功能特别多，能做到很多原厂Recovery做不到的事情，加上前面提到的问题...所以其实我们搞机前直接替换掉原厂的就好了。
手机的OTA功能也是通过Recovery进行安装更新包的，有些厂商的原厂系统更新包会有一些骚操作，所以如果你用了第三方Recovery之后无法正常更新系统的话，可以刷回原厂Recovery再更新（反正环境搭好之后你就基本不用进这里了）。
### Fastboot(线刷)
Fastboot是一个与Bootloader进行通信的工具，它与ADB类似，但比ADB更底层。它相当于一些主板上较为高级的UEFI（可以理解成比操作系统更底层的操作系统），我们也能通过它来进行刷机。
因为Fastboot是需要连接电脑，让电脑提供刷机包的，所以在这里进行刷机操作通常又被称为“线刷”。
它可以被用来替换Recovery，所以如果你把Recovery玩挂了也没关系，只要你能进Fastboot就还是可以救回来。如果连Fastboot都挂了的话，你就只能指望像高通9008模式之类的东西了。而如果你的手机没有这种东西的话...那就只能送回厂重刷闪存，或者...当砖头砸核桃用了。
### 高通9008模式
9008模式学名叫Qualcomm HS-USB QDLoader 9008，是一个SoC级的调试接口。即使你的系统挂了、Recovery和Fastboot也都挂了，你也还是可以通过它来将手机恢复到正常状态；即使你没有解BL锁，你也能把System分区换个底朝天。
但是这种SoC级的调试接口属于大杀器，不到万不得已时尽量不要使用，以免手贱。
### OTA
OTA没啥好介绍的，就是更新系统用的。
前面讲Recovery的时候提到了一个小坑点，这里再说个第三方ROM的小坑点吧。有些第三方ROM是所谓的“官改”，也就是那种基于厂商原厂系统进行魔改的系统，这些ROM中有些会告诉你无法进行OTA更新，原因其实就是厂商做了签名校验，改过的系统过不了校验自然只能每次都手动更新（注意只是有些）。
### A/B 分区
A/B分区会有两份系统和引导程序的分区，一份给你使用，一份作为备用。这个功能主要是为了OTA更新时能做到在手机开机状态下后台安装系统更新，使用户只需要重启一下手机就能直接进入新版本的系统，可以极大地提升用户体验。
同时，A/B分区还可以防止出现用户误操作搞挂系统的情况，因为即使搞挂了也还是有另一个分区的系统可以使用，稳定性更高。
但是这玩意对搞机来说就有点烦人了，有些使用了A/B分区的手机（比如essential phone），你在准备环境或刷ROM时需要对两个分区都操作一次，否则就会出现OTA一下环境全没了的情况。
### System 分区
字面意思，系统分区，里面包含了操作系统本身（官方的说法是Android 框架）和系统应用。也就是说，在这里面跟系统一起运行的，都是具有高权限的。
像Magisk、Xposed这种东西，都是需要装到System分区中去的。
System分区在解BL锁获取高权限前无法进行操作，同样也是为了安全考虑。
这里再扩展一下，有些手机的系统应用特别多，而且正常无法删除，这种情况下别人通常会告诉你获取ROOT权限后再进行卸载。这其实就是前面讲的权限问题，用户的正常权限比系统要低，所以自然就无法进行卸载操作了。
### 全盘加密 / 加密分区
全盘加密是一个能让用户在手机遗失的情况下不泄露数据的功能，现在高版本的Android都是默认开启了全盘加密的。
如果你已经进入过一次系统并设置了锁屏密码，那么你可能会在后续进入Recovery时看到一个“分区已加密，请输入密码”之类的提示，这时候你只需要输入锁屏密码就可以解锁了。
### ADB
ADB全名叫Android调试桥，是一个系统级的命令行工具，需要进入系统后才能使用。
ADB的功能非常多，像常用的复制文件、重启/关机、打开手机的shell、查看activity、安装/卸载app、开启/关闭设备管理员功能、截屏、录屏、模拟点击/滑动等操作都可以通过ADB来实现。
一般来说，如果是日常用机，并且没有特殊需求的话，建议平时将ADB关闭掉，以免出现插了什么奇怪的设备导致设备被黑掉之类的情况。
### XPosed
Xposed是一个Hook框架，简单来说就是可以在不修改APP本身的情况下影响程序的运行效果。它有一个模块的概念，你可以通过Xposed实现一些魔改，达到各种高度定制化和一些APP原本无法做到的效果。
Xposed原作者Rovo89目前已经弃坑，不过没关系，开源社区中继承原版Xposed大任的各种框架目前可以说是百花齐放的状态，像比较知名的EdXposed、XPatch、太极（太极本身是闭源的，但它的Hook框架Epic是开源的）之类的都可以选择使用。
### Magisk
Magisk是一个类似于Xposed但功能和实现方式与Xposed截然不同的框架，它自带ROOT功能，并且可以让APP检测不了你的手机是否有被魔改。
碰到有检测ROOT、检测系统完整性、检测是否通过Google的SafetyNet认证的情况时，只需要使用Magisk的Hide功能就能轻松将你手机已被魔改的事实隐藏起来，对某些银行类APP有奇效。
Magisk与Xposed一样，也有模块的概念，你也可以通过它实现一些魔改，达到各种高度定制化和原本无法做到的效果。
### SafetyNet
SafetyNet是Google搞的一个用来检测设备是否ROOT过，设备运行环境是否安全等东西的功能，或者说...服务？在Google Play的设置中有个Play保护机制认证，这东西有一部分检测就是依靠SafetyNet来做的。
有些第三方APP也会通过SafetyNet来做到增强反作弊、反盗版功能的效果，虽然其实没什么卵用...像Netflix、Pokémon Go如果检测到SafetyNet不通过，就直接不让你用了；Google Play如果检测到SafetyNet不通过，部分APP就不让你搜到和下载了（比如Netflix）。
## 手机远程控制手机
## 手机数据备份
设置--> 备份与恢复
本地备份
- 手机备份恢复
- 电脑备份恢复
- U盘备份恢复
云端备份（小米云服务）
缺点没有办法备份应用数据，只能保存应用
### 有ROOT的情况
- 钛备份

### 没有ROOT的情况

- 小米换机（两台小米手机）
- OTB(U盘)备份
	- U盘备份和恢复
- 电脑小米助手备份

## 线刷获取ROOT

提取boot文件

- 下载对应的系统进行解包
	- 使用payload软件进行解包
- Magisk面具修补Boot.img文件
	- 修补Boot.img文件
- 一键刷入新的.com - 小米 ROM 线刷包, 卡刷包的最新及历史版本下载](https://xiaomirom.com/)

## 卡刷





### 刷入TWRP

