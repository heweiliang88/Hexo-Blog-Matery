<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="树莓派从入门到入灰, 前端、免流、技术、运维、手机">
    <meta name="description" content="树莓派基础知识ARM 架构ARM（ARM处理器)ARM处理器是英国Acorn有限公司设计的低功耗成本的第一款RISC微处理器。全称为Advanced RISC Machine。ARM处理器本身是32位设计，但也配备16位指令集，一般来讲比等">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>树莓派从入门到入灰 | 从你的全世界路过</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="从你的全世界路过" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">从你的全世界路过</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">从你的全世界路过</div>
        <div class="logo-desc">
            
            我希望有个如你一般的人。 如这山间清晨一般明亮清爽的人， 如奔赴古城道路上阳光一般的人， 温暖而不炙热，覆盖我所有肌肤。 由起点到夜晚，由山野到书房， 一切问题的答案都很简单。 我希望有个如你一般的人，贯彻未来，数遍生命的公路牌。
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/heweiliang88" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        /* color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px; */

        color: #F062A7;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {

        0%,
        to {
            transform: rotate(0);
        }

        20%,
        60% {
            transform: rotate(-25deg);
        }

        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/heweiliang88" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
    data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
            d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
            fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
            d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
            fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/18.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">树莓派从入门到入灰</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/">
                                <span class="chip bg-color">树莓派</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E7%88%B1%E5%A5%BD/" class="post-category">
                                爱好
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-07-24
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-10-26
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    26 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				

                <div class="info-break-policy">
                    
                                <i class="fa fa-pencil"></i> 作者: 记住
                                    
                </div>
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="树莓派基础知识"><a href="#树莓派基础知识" class="headerlink" title="树莓派基础知识"></a>树莓派基础知识</h1><h2 id="ARM-架构"><a href="#ARM-架构" class="headerlink" title="ARM 架构"></a>ARM 架构</h2><p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/ARM/7518299?fr=aladdin">ARM（ARM处理器)</a><br>ARM处理器是英国Acorn有限公司设计的低功耗成本的第一款<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/RISC/62696">RISC</a>微处理器。全称为Advanced RISC Machine。ARM处理器本身是32位设计，但也配备16位指令集，一般来讲比等价32位代码节省达35%，却能保留32位系统的所有优势。</p>
<h2 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h2><p>CPU：Broadcom BCM2711，1.5 GHz，64-bit，4核心，ARM Cortex-A72 架构，1MB shared L2 cache<br>RAM：1、2、4 GB LPDDR4-3200 RAM (shared with GPU)</p>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>以太网：10/100/1000 Mbit/s<br>无线网：b/g/n/ac 双频 2.4/5 GHz<br>蓝牙：5.0</p>
<h2 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h2><p>GPU：Broadcom VideoCore VI @ 500 MHz<br>HDMI：micro-HDMI<br>DSI：板载排线</p>
<h2 id="外围设备"><a href="#外围设备" class="headerlink" title="外围设备"></a>外围设备</h2><p>17× GPIO plus the same specific functions, HAT, and an additional 4× UART, 4× SPI, and 4× I2C connectors</p>
<h2 id="win10连接命令"><a href="#win10连接命令" class="headerlink" title="win10连接命令"></a>win10连接命令</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">ssh</span> –p21 账号@IP地址 //路由器分配的IP
raspberry
</code></pre>
<h2 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h2><p>系统安装 + 图形界面安装<br> 安装系统的方法<br>树莓派的操作系统有两种安装方式：<br>一种：先把树莓派的安装引导程序NOOBS写入SD卡，然后启动树莓派进入NOOBS来安装操作系统。<br>另一种：是使用软件``balenaEtcher`将操作系统镜像写入SD卡，树莓派启动后直接进入操作系统。</p>
<h3 id="树莓派默认账号密码"><a href="#树莓派默认账号密码" class="headerlink" title="树莓派默认账号密码"></a>树莓派默认账号密码</h3><pre class=" language-bash"><code class="language-bash">pi
raspberry
</code></pre>
<h3 id="无显示器连接树莓派"><a href="#无显示器连接树莓派" class="headerlink" title="无显示器连接树莓派"></a>无显示器连接树莓派</h3><p>SSH连接<br>新建boot目录下新建一个SSH文件<br>设置wiff 新建文件<code>wpa_supplicant.conf</code></p>
<pre class=" language-conf"><code class="language-conf">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=CN
network={
        ssid="ChinaNet-mcEc"
        psk="uq7nqawx"
        key_mgmt=WPA-PSK     
}
network={
        ssid="你的其他无线网名字"
        psk="密码"
        key_mgmt=WPA-PSK
}        
</code></pre>
<p>如果你的 WiFi 没有密码</p>
<pre class=" language-bash"><code class="language-bash">network<span class="token operator">=</span><span class="token punctuation">{</span>``ssid<span class="token operator">=</span><span class="token string">"你的无线网络名称（ssid）"</span>`<span class="token variable"><span class="token variable">`</span>key_mgmt<span class="token operator">=</span>NONE<span class="token variable">`</span></span>`<span class="token punctuation">}</span>
</code></pre>
<p>如果你的 WiFi 使用WEP加密</p>
<pre class=" language-bash"><code class="language-bash">network<span class="token operator">=</span><span class="token punctuation">{</span>``ssid<span class="token operator">=</span><span class="token string">"你的无线网络名称（ssid）"</span>`<span class="token variable"><span class="token variable">`</span>key_mgmt<span class="token operator">=</span>NONE<span class="token variable">`</span></span>`wep_key0<span class="token operator">=</span><span class="token string">"你的wifi密码"</span>``<span class="token punctuation">}</span>
</code></pre>
<p>如果你的 WiFi 使用WPA/WPA2加密</p>
<pre class=" language-bash"><code class="language-bash">network<span class="token operator">=</span><span class="token punctuation">{</span>``ssid<span class="token operator">=</span><span class="token string">"你的无线网络名称（ssid）"</span>`<span class="token variable"><span class="token variable">`</span>key_mgmt<span class="token operator">=</span>WPA-PSK<span class="token variable">`</span></span>`psk<span class="token operator">=</span><span class="token string">"你的wifi密码"</span>``<span class="token punctuation">}</span>
</code></pre>
<h3 id="VNC-远程连接树莓派"><a href="#VNC-远程连接树莓派" class="headerlink" title="VNC 远程连接树莓派"></a>VNC 远程连接树莓派</h3><p>开启VNC 和提高分辨率</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> raspi-config
</code></pre>
<h3 id="树莓派固定IP"><a href="#树莓派固定IP" class="headerlink" title="树莓派固定IP"></a>树莓派固定IP</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/network/interfaces
</code></pre>
<p>为了防止树莓派的IP地址每次都变动，可以将DHCP改为静态IP。编辑/etc/dhcpcd.conf文件，加入以下配置即可。如果是有线网，就将wlan0改为eth0。</p>
<pre><code>interface wlan0  
static ip_address=192.168.1.111/24
static routers=192.168.1.1
static domain_name_servers=114.114.114.114
</code></pre>
<h2 id="更换源"><a href="#更换源" class="headerlink" title="更换源"></a>更换源</h2><p>删除内容： 3dd  3 行<br>注意树莓派4B的Respbian是基于Debian 10 Bluster 不要选错。<br>根据提示修改：</p>
<pre><code># 编辑 `/etc/apt/sources.list` 文件，删除原文件所有内容，用以下内容取代：
deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib
# 编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除原文件所有内容，用以下内容取代：
deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui
</code></pre>
<p>sudo apt-get update后报错<br>The following signatures couldn’t be verified because the public key is not available: NO_PUBKEY XXXXXXXXXXXX<br>直接添加该KEY解决</p>
<pre><code>sudo apt-key adv –keyserver keyserver.ubuntu.com –recv-keys XXXXXXXXX
</code></pre>
<p>树莓派安装Samba<br>\\192.168.1.11</p>
<blockquote>
<p>树莓派在家中至少三个作用：<code>家庭资源共享中心</code>、<code>无线打印服务器</code>、<code>下载服务器</code>。<br><code>家庭资源共享中心</code>用<code>samba</code>实现家庭局域网共享，树莓派4B的话可以接2个3.0的移动硬盘。<br>实测速度不快，Win读<code>2Mb/s</code>写<code>1Mb/s</code>，Mac读<code>1Mb/s</code>写<code>0.5Mb/s</code>，传小文件比较方便，备份资料可以的，视频不是超高清也能放，但是大文件建议还是直接接电脑。</p>
</blockquote>
<h2 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h2><p>记得安装前先更新一下源，不然可能有些包安装不全。</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre>
<h2 id="安装及配置"><a href="#安装及配置" class="headerlink" title="安装及配置"></a>安装及配置</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> samba samba-common-bin
<span class="token comment" spellcheck="true"># 安装</span>
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/samba/smb.conf
<span class="token comment" spellcheck="true">#修改配置文件</span>
<span class="token comment" spellcheck="true"># 在smb.conf文件末尾加入下边两段</span>
/media/pi/Backup Plus/else/
<span class="token punctuation">[</span>myshare<span class="token punctuation">]</span>                       <span class="token comment" spellcheck="true"># 显示名称</span>
comment <span class="token operator">=</span> my share directory    <span class="token comment" spellcheck="true"># 共享说明</span>
path <span class="token operator">=</span> /home/pi                 <span class="token comment" spellcheck="true"># 共享目录，可自行修改</span>
browseable <span class="token operator">=</span> <span class="token function">yes</span>                <span class="token comment" spellcheck="true"># 可读权限</span>
writeable <span class="token operator">=</span> <span class="token function">yes</span>                 <span class="token comment" spellcheck="true"># 写入权限</span>
guest ok <span class="token operator">=</span> <span class="token function">yes</span>                  <span class="token comment" spellcheck="true"># 可写可不写</span>
<span class="token punctuation">[</span>portable<span class="token punctuation">]</span>                      <span class="token comment" spellcheck="true"># 移动硬盘</span>
comment <span class="token operator">=</span> portable disk        
path <span class="token operator">=</span> /media/pi                <span class="token comment" spellcheck="true"># 移动硬盘目录，接几个都会显示在这里</span>
browseable <span class="token operator">=</span> <span class="token function">yes</span>                
writeable <span class="token operator">=</span> <span class="token function">yes</span>                 
guest ok <span class="token operator">=</span> <span class="token function">yes</span>
<span class="token comment" spellcheck="true"># 保存（ctrl+o）退出（ctrl+x）</span>
<span class="token function">sudo</span> smbpasswd -a pi
<span class="token comment" spellcheck="true"># 默认用户pi，设置密码</span>
<span class="token function">sudo</span> smbpasswd -e pi
<span class="token comment" spellcheck="true"># 激活用户</span>
<span class="token function">sudo</span> <span class="token function">service</span> smbd restart
<span class="token comment" spellcheck="true"># 重启服务</span>
<span class="token function">sudo</span> /etc/init.d/samba start
<span class="token comment" spellcheck="true"># 如果没有开启，可以手动开启，如果还连不上就重启树莓派吧</span>
<span class="token function">sudo</span> <span class="token function">nano</span> /etc/rc.local
<span class="token comment" spellcheck="true"># 如需自动启动，可将上一行命令（sudo /etc/init.d/samba start—）加到exit 0 之前</span>
</code></pre>
<p>设置/media/pi 文件夹权限<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kaerxifa/p/10931523.html">linux文件夹　权限为所有用户可 读写</a><br>使用命令：</p>
<pre><code>sudo chmod 777 dirname -R
</code></pre>
<h2 id="格式化SD卡"><a href="#格式化SD卡" class="headerlink" title="格式化SD卡"></a>格式化SD卡</h2><p>使用系统工具格式化SD卡</p>
<h2 id="使用刻录工具"><a href="#使用刻录工具" class="headerlink" title="使用刻录工具"></a>使用刻录工具</h2><p>使用balenaEtcher 写入 SD卡中 </p>
<h2 id="修改树莓派密码"><a href="#修改树莓派密码" class="headerlink" title="修改树莓派密码"></a>修改树莓派密码</h2><p>默认账号和密码都是：Ubuntu<br>设置的密码要是字母 +  数字 abc123 </p>
<h2 id="下载桌面环境"><a href="#下载桌面环境" class="headerlink" title="下载桌面环境"></a>下载桌面环境</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ubuntu-desktop 
<span class="token function">sudo</span> <span class="token function">apt-get</span> update --fix-missing
</code></pre>
<h2 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h2><p>安装 vim</p>
<pre><code>sudo agt-get install vim
</code></pre>
<p>nano保存退出<br>linux下在编辑状态下退出请按Ctrl+X，会有两种情形：如果文件未修改，直接退出，如果修改了文件，下面会询问是否需要保存修改。<br>输入Y确认保存，输入N不保存，按Ctrl+C取消返回。如果输入了Y，下一步会提示输入想要保存的文件名。<br>备份源</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak
</code></pre>
<p>编辑 sources.list 文件</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/apt/sources.list
</code></pre>
<p>打开源的文件，把里面ports.ubuntu.com都换成mirrors.aliyun.com 更新过程要等待</p>
<pre class=" language-bash"><code class="language-bash">esc键 
:%s/源字符串/目标字符串/g
:%s/ports.ubuntu.com/mirrors.aliyun.com/g
:wq<span class="token operator">!</span>
</code></pre>
<p>树莓派连接网线，更新源 和 重启 等待更新源</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">reboot</span>
</code></pre>
<h1 id="树莓派基本配置"><a href="#树莓派基本配置" class="headerlink" title="树莓派基本配置"></a>树莓派基本配置</h1><p>win10连接命令</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">ssh</span> –p21 账号@IP地址 //路由器分配的IP
raspberry
</code></pre>
<h3 id="系统安装-1"><a href="#系统安装-1" class="headerlink" title="系统安装"></a>系统安装</h3><p>系统安装 + 图形界面安装</p>
<p>安装系统的方法</p>
<ul>
<li>先把树莓派的安装引导程序NOOBS写入SD卡，然后启动树莓派进入NOOBS来安装操作系统。</li>
<li>是使用软件``balenaEtcher`将操作系统镜像写入SD卡，树莓派启动后直接进入操作系统。</li>
</ul>
<h3 id="树莓派默认账号密码-1"><a href="#树莓派默认账号密码-1" class="headerlink" title="树莓派默认账号密码"></a>树莓派默认账号密码</h3><pre class=" language-bash"><code class="language-bash">pi
raspberry
</code></pre>
<h3 id="无显示器连接树莓派-1"><a href="#无显示器连接树莓派-1" class="headerlink" title="无显示器连接树莓派"></a>无显示器连接树莓派</h3><ol>
<li>SSH连接<br>新建boot目录下新建一个SSH文件</li>
<li>设置wiff 新建文件<code>wpa_supplicant.conf</code><pre class=" language-conf"><code class="language-conf">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=CN
network={
     ssid="ChinaNet-mcEc"
     psk="uq7nqawx"
     key_mgmt=WPA-PSK     
}
network={
     ssid="你的其他无线网名字"
     psk="密码"
     key_mgmt=WPA-PSK
}        
</code></pre>
如果你的 WiFi 没有密码<pre><code>network={``ssid="你的无线网络名称（ssid）"``key_mgmt=NONE``}
</code></pre>
如果你的 WiFi 使用WEP加密<pre><code>network={``ssid="你的无线网络名称（ssid）"``key_mgmt=NONE``wep_key0="你的wifi密码"``}
</code></pre>
如果你的 WiFi 使用WPA/WPA2加密<pre><code>network={``ssid="你的无线网络名称（ssid）"``key_mgmt=WPA-PSK``psk="你的wifi密码"``}
</code></pre>
<h3 id="VNC-远程连接树莓派-1"><a href="#VNC-远程连接树莓派-1" class="headerlink" title="VNC 远程连接树莓派"></a>VNC 远程连接树莓派</h3>开启VNC 和提高分辨率<pre><code>sudo raspi-config
</code></pre>
<h3 id="更换源-1"><a href="#更换源-1" class="headerlink" title="更换源"></a>更换源</h3></li>
</ol>
<p>nano保存退出<br>linux下在编辑状态下退出请按Ctrl+X，会有两种情形：如果文件未修改，直接退出，如果修改了文件，下面会询问是否需要保存修改。<br>输入Y确认保存，输入N不保存，按Ctrl+C取消返回。如果输入了Y，下一步会提示输入想要保存的文件名。</p>
<h3 id="树莓派固定IP-1"><a href="#树莓派固定IP-1" class="headerlink" title="树莓派固定IP"></a>树莓派固定IP</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zbr794866300/article/details/98983749">(30条消息)树莓派设置固定IP地址的方法（亲测有效）_zbr794866300的博客-CSDN博客_树莓派固定ip</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/2sheep2simple/p/10611170.html">E: 无法打开锁文件 /var/lib/dpkg/lock-frontend - open (13: 权限不够)E: 无法获取 dpkg 前端锁 (/var/lib/dpkg/lock-frontend)，请查看您是否正以 root 用户运行？ - 不肥的死肥宅 - 博客园</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dxm809/article/details/103799537">(30条消息)E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarly unavailable)_dxm809的博客-CSDN博客_e: could not get lock /var/lib/dpkg/lock-frontend</a></p>
</blockquote>
<pre><code>sudo nano /etc/network/interfaces
</code></pre>
<p>安装 vim</p>
<p>为了防止树莓派的IP地址每次都变动，可以将DHCP改为静态IP。编辑/etc/dhcpcd.conf文件，加入以下配置即可。如果是有线网，就将wlan0改为eth0。</p>
<pre><code>interface wlan0
static ip_address=192.168.1.111/24
static routers=192.168.1.1
static domain_name_servers=114.114.114.114
</code></pre>
<h1 id="树莓派电视机盒子"><a href="#树莓派电视机盒子" class="headerlink" title="树莓派电视机盒子"></a>树莓派电视机盒子</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://imsqua.re/blog/post/squarefong/%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE4B%E5%81%9A%E9%AB%98%E6%B8%85%E6%92%AD%E6%94%BE%E7%9A%84%E7%9B%92%E5%AD%90">用树莓派4B做4K机顶盒</a></p>
</blockquote>
<h1 id="树莓派下载机"><a href="#树莓派下载机" class="headerlink" title="树莓派下载机"></a>树莓派下载机</h1><h2 id="百度网盘下载"><a href="#百度网盘下载" class="headerlink" title="百度网盘下载"></a>百度网盘下载</h2><p><a target="_blank" rel="noopener" href="https://www.lxx1.com/3495">树莓派做百度云盘离线下载器 | 科技爱好者博客 -专注于树莓派（Raspberry Pi）</a><br><a target="_blank" rel="noopener" href="https://zhidao.baidu.com/question/509126302.html">LInux下卸载命令_百度知道</a></p>
<h2 id="aira2下载机"><a href="#aira2下载机" class="headerlink" title="aira2下载机"></a>aira2下载机</h2><p><a target="_blank" rel="noopener" href="https://www.freesion.com/article/4555471768/">树莓派下载机aria2+Samba搭建NAS下载机 - 灰信网（软件开发博客聚合）</a><br><a target="_blank" rel="noopener" href="https://hacpai.com/article/1548140422018">搭建 aria2 下载机一键脚本 - 黑客派</a></p>
<h1 id="安装ubuntu系统"><a href="#安装ubuntu系统" class="headerlink" title="安装ubuntu系统"></a>安装ubuntu系统</h1><p>工具：balenaEtcher<br>镜像：<a target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/ubuntu-cdimage/releases/18.04/release/ubuntu-18.04.4-preinstalled-server-armhf%2Braspi4.img.xz.zsync">ubuntu-18.04.4-preinstalled-server-armhf+raspi4..&gt;</a></p>
<h2 id="格式化SD卡-1"><a href="#格式化SD卡-1" class="headerlink" title="格式化SD卡"></a>格式化SD卡</h2><p>使用系统工具格式化SD卡</p>
<h2 id="使用刻录工具-1"><a href="#使用刻录工具-1" class="headerlink" title="使用刻录工具"></a>使用刻录工具</h2><p>使用balenaEtcher 写入 SD卡中 </p>
<h2 id="修改树莓派密码-1"><a href="#修改树莓派密码-1" class="headerlink" title="修改树莓派密码"></a>修改树莓派密码</h2><p>默认账号和密码都是：Ubuntu<br>设置的密码要是字母 +  数字 abc123 </p>
<h2 id="更新源-1"><a href="#更新源-1" class="headerlink" title="更新源"></a>更新源</h2><p>备份源</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak
</code></pre>
<p>编辑 sources.list 文件</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/apt/sources.list
</code></pre>
<p>打开源的文件，把里面ports.ubuntu.com都换成mirrors.aliyun.com 更新过程要等待</p>
<pre class=" language-bash"><code class="language-bash">esc键 
:%s/源字符串/目标字符串/g
:%s/ports.ubuntu.com/mirrors.aliyun.com/g
:wq<span class="token operator">!</span>
</code></pre>
<p>树莓派连接网线，更新源 和 重启 等待更新源</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> uprade
<span class="token function">reboot</span>
</code></pre>
<h2 id="下载桌面环境-1"><a href="#下载桌面环境-1" class="headerlink" title="下载桌面环境"></a>下载桌面环境</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ubuntu-desktop 
<span class="token function">sudo</span> <span class="token function">apt-get</span> update --fix-missing
</code></pre>
<h1 id="挂载磁盘"><a href="#挂载磁盘" class="headerlink" title="挂载磁盘"></a>挂载磁盘</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ef23a1b88c22">树莓派之挂载移动硬盘 - 简书</a><br>查看磁盘状态</p>
<pre><code>sudo fdisk -l
df -h
先建一个目录 ，让树莓派挂载在创建的目录
先建一个目录 ，让树莓派挂载在创建的目录
sudo mkdir /home/pi/toshiba
先建一个目录 ，让树莓派挂载在创建的目录
sudo mount /dev/sda1  /home/pi/toshiba
</code></pre>
<p>6.安装NTFS格式可读写软件</p>
<blockquote>
<p><em>sudo aptitude install ntfs-3g</em><br>7.加载内核模块<br><em>modprobe fuse</em><br>8.让移动硬盘开机自动挂载<br><em>sudo nano /etc/fstab</em><br>最后一行添加<br>/dev/sda1  /home/pi/toshiba ntfs-3g defaults,noexec,umask=0000 0 0<br>9.有时候，挂载会出错，Mount is denied：<br><strong>挂载exFAT格式的硬盘</strong><br>FAT 格式U盘 mount 本身就能支持，但如果你的U盘或移动硬盘使用的是 exFAT 格式，mount 会说不支持。没关系，安装 exfat-fuse 软件之后 mount 就支持了。<br>sudo apt-get install exfat-fuse<br>如果想开机自动挂载，而不是每次手工执行，可以编辑 /etc/fstab 文件。比如在末尾添加一行：<br>/dev/sda1 /mnt/usbdisk vfat rw,defaults 0 0</p>
</blockquote>
<h1 id="安装aira2下载机"><a href="#安装aira2下载机" class="headerlink" title="安装aira2下载机"></a>安装aira2下载机</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.freesion.com/article/4555471768/">树莓派下载机aria2+Samba搭建NAS下载机 - 灰信网（软件开发博客聚合）</a><br><a target="_blank" rel="noopener" href="https://hacpai.com/article/1548140422018">搭建 aria2 下载机一键脚本 - 黑客派</a></p>
</blockquote>
<h1 id="百度网盘下载机"><a href="#百度网盘下载机" class="headerlink" title="百度网盘下载机"></a>百度网盘下载机</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装 BaiduPCS-Go web<br><a target="_blank" rel="noopener" href="https://github.com/mayunbaba2/BaiduPCS-Go-Web">Github</a><br>下载 BaiduPCS-Go web<br>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1EGhXzzpeSd5UsAMAPjaIVw">https://pan.baidu.com/s/1EGhXzzpeSd5UsAMAPjaIVw</a>  提取码：c4v2<br>解压安装包</p>
<pre class=" language-bash"><code class="language-bash">unzip BaiduPCS-Go-3.7.0-linux-arm.zip
</code></pre>
<p>进入 解压后的文件夹，执行以下命令即可在树莓派上安装 BaiduPCS-Go 。</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> BaiduPCS-Go-3.7.0-linux-arm     <span class="token comment" spellcheck="true">#cd 到软件所在的目录</span>
<span class="token function">chmod</span> a+x BaiduPCS-Go 
./BaiduPCS-Go
</code></pre>
<p>打开http://树莓派的ip地址:5299就可以看到百度云的登陆界面啦。</p>
<h2 id="登陆"><a href="#登陆" class="headerlink" title="登陆"></a>登陆</h2><ul>
<li>百度云账号登陆</li>
<li>BDUSS登陆<br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/mayuko2012/article/details/48196729">bduss获取</a><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2>设置下载目录<pre class=" language-bash"><code class="language-bash">/media/pi/Backup Plus/
</code></pre>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><a target="_blank" rel="noopener" href="https://www.lxx1.com/3495">树莓派做百度云盘离线下载器 | 科技爱好者博客 -专注于树莓派（Raspberry Pi）</a></li>
</ul>
<h1 id="安装embyserver服务器"><a href="#安装embyserver服务器" class="headerlink" title="安装embyserver服务器"></a>安装embyserver服务器</h1><p>媒体服务器</p>
<ul>
<li>flex</li>
<li>emby</li>
<li>jellyfin<pre class=" language-bash"><code class="language-bash">dpkg -i emby-server-deb_4.2.0.5_armhf.deb
</code></pre>
<pre><code>// 等待时间较长
Selecting previously unselected package emby-server.
(Reading database ... 158438 files and directories currently installed.)
Preparing to unpack emby-server-deb_4.4.3.0_armhf.deb ...
Unpacking emby-server (4.4.3.0) ...
Setting up emby-server (4.4.3.0) ...
usermod: no changes
Created symlink /etc/systemd/system/multi-user.target.wants/emby-server.service → /usr/lib/systemd/system/emby-server.service.
Processing triggers for libc-bin (2.28-10+rpi1) ...
</code></pre>
访问树莓派IP地址:8096</li>
</ul>
<h1 id="安装nextcloud云盘"><a href="#安装nextcloud云盘" class="headerlink" title="安装nextcloud云盘"></a>安装nextcloud云盘</h1><p><strong>nextcloud</strong>前身是大名鼎鼎的<strong>owncloud</strong>，两者均是开源的网络硬盘系统。<strong>nextcloud</strong>不仅可以搭建私有云存储和同步数据，也提供联系人、日程管理功能，web端还提供私密的语音视频通话功能。<strong>nextcloud</strong>致力于数据安全，云端的数据均可选择加密，并遵循安全行业最佳实践。客户端支持windows、macos、linux三大pc平台，以及安卓ios两大移动平台，完全足够家庭或中小型团队协作使用。</p>
<h2 id="部署和设置nextcloud"><a href="#部署和设置nextcloud" class="headerlink" title="部署和设置nextcloud"></a>部署和设置nextcloud</h2><p>nextcloud程序由php语言编写，因此部署需要具备php运行环境以及web中间件。因其支持平台众多，官方文档略显繁琐，故本文给出<strong>树莓派</strong>上用nginx、mariadb、redis搭建nextcloud的详细步骤。<br>从官网<a target="_blank" rel="noopener" href="https://nextcloud.com/install/#instructions-server">下载部署程序</a>；<br>用迅雷进行下载再上传, 或者在树莓派运行命令进行下载(外网, 很慢):</p>
<pre><code>https://download.nextcloud.com/server/releases/nextcloud-19.0.1.zip
</code></pre>
<p>更新系统和必备软件：<br><code>sudo apt update &amp;&amp; sudo apt upgrade &amp;&amp; sudo apt install -y libreoffice ffmpeg</code>；<br>安装nginx：<code>sudo apt install -y nginx</code>；<br>安装redis：<code>sudo apt install -y redis</code>;<br>安装mariadb：<code>sudo apt install mariadb-server</code>；<br>安装php及推荐模块：<code>sudo apt install -y php7.3 php7.3-fpm php7.3-curl php7.3-gd php7.3-dom php7.3-iconv php7.3-openssl php-redis php-mysql php7.3-zip php7.3-bz2 php7.3-intl php7.3-imagick</code>；<br>解压部署程序：<code>unzip nextcloud-xxxx.zip</code>；<br>将nextcloud文件移动到网站根目录：<code>sudo mv nextcloud-xxx /var/www/html/nextcloud</code>；<br>创建数据目录，更改目录权限：<code>mkdir /var/www/html/nextcloud/data &amp;&amp; sudo chown -R www-data:www-data /var/www/html/nextcloud</code>；<br>配置php：打开<br>/etc/php/7.3/fpm/php.ini<br>文件，做如下更改：<br>expose_php改成off<br>date.timezone 一行删掉前面的;号，值改成Asia/Shanghai<br>删掉opcache.enable=1，opcache.validate_timestamps=1，opcache.revalidate_freq=2这三行前面的;号，将opcache.revalidate_freq的值改成30;<br>配置fpm：打开**/etc/php/7.3/fpm/pool.d/<a href="http://www.conf**文件，移除clear_env=no，env[开头那几行前面的;号（即388，401-405这几行前面的分号）；">www.conf**文件，移除clear_env=no，env[开头那几行前面的;号（即388，401-405这几行前面的分号）；</a><br>设置mariadb管理员密码： <code>mysqladmin -uroot password '你的密码'</code>;<br>创建nextcloud数据库：<code>mysql -uroot -p'你的密码' -e 'create user nextcloud@"%" identified by "nextcloud数据库密码"; create database nextcloud default charset=utf8mb4; grant all privileges on nextcloud.* to nextcloud@"%"; flush privileges;'</code>；<br>配置nginx：在<br>/etc/nginx/sites-enabled<br>目录下，创建一个nextcloud文件，其内容如下（注意，本配置中禁用了https）：</p>
<pre><code>upstream php-handler {
server unix:/run/php/php7.3-fpm.sock;
}
server {
listen 80;
listen [::]:80;
server_name cloud.example.com;
# enforce https
#return 301 https://$server_name:443$request_uri;
#}
#server {
#    listen 443 ssl http2;
#    listen [::]:443 ssl http2;
#    server_name cloud.example.com;
# Use Mozilla's guidelines for SSL/TLS settings
# https://mozilla.github.io/server-side-tls/ssl-config-generator/
# NOTE: some settings below might be redundant
#    ssl_certificate /etc/ssl/nginx/cloud.example.com.crt;
#    ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;
# Path to the root of your installation
root /var/www/html/nextcloud;
location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
}
# The following 2 rules are only needed for the user_webfinger app.
# Uncomment it if you're planning to use this app.
#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;
#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;
# The following rule is only needed for the Social app.
# Uncomment it if you're planning to use this app.
#rewrite ^/.well-known/webfinger /public.php?service=webfinger last;
location = /.well-known/carddav {
  return 301 $scheme://$host:$server_port/remote.php/dav;
}
location = /.well-known/caldav {
  return 301 $scheme://$host:$server_port/remote.php/dav;
}
# set max upload size
client_max_body_size 512M;
fastcgi_buffers 64 4K;
# Enable gzip but do not remove ETag headers
gzip on;
gzip_vary on;
gzip_comp_level 4;
gzip_min_length 256;
gzip_proxied expired no-cache no-store private no_last_modified no_etag auth;
gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy;
# Uncomment if your server is build with the ngx_pagespeed module
# This module is currently not supported.
#pagespeed off;
location / {
    rewrite ^ /index.php;
}
location ~ ^\/(?:build|tests|config|lib|3rdparty|templates|data)\/ {
    deny all;
}
location ~ ^\/(?:\.|autotest|occ|issue|indie|db_|console) {
    deny all;
}
location ~ ^\/(?:index|remote|public|cron|core\/ajax\/update|status|ocs\/v[12]|updater\/.+|oc[ms]-provider\/.+)\.php(?:$|\/) {
    fastcgi_split_path_info ^(.+?\.php)(\/.*|)$;
    set $path_info $fastcgi_path_info;
    try_files $fastcgi_script_name =404;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param PATH_INFO $path_info;
    #fastcgi_param HTTPS on;
    # Avoid sending the security headers twice
    fastcgi_param modHeadersAvailable true;
    # Enable pretty urls
    fastcgi_param front_controller_active true;
    fastcgi_pass php-handler;
    fastcgi_intercept_errors on;
    fastcgi_request_buffering off;
}
location ~ ^\/(?:updater|oc[ms]-provider)(?:$|\/) {
    try_files $uri/ =404;
    index index.php;
}
# Adding the cache control header for js, css and map files
# Make sure it is BELOW the PHP block
location ~ \.(?:css|js|woff2?|svg|gif|map)$ {
    try_files $uri /index.php$request_uri;
    add_header Cache-Control "public, max-age=15778463";
    # Add headers to serve security related headers (It is intended to
    # have those duplicated to the ones above)
    # Before enabling Strict-Transport-Security headers please read into
    # this topic first.
    #add_header Strict-Transport-Security "max-age=15768000; includeSubDomains; preload;" always;
    #
    # WARNING: Only add the preload option once you read about
    # the consequences in https://hstspreload.org/. This option
    # will add the domain to a hardcoded list that is shipped
    # in all major browsers and getting removed from this list
    # could take several months.
    add_header Referrer-Policy "no-referrer" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-Download-Options "noopen" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Permitted-Cross-Domain-Policies "none" always;
    add_header X-Robots-Tag "none" always;
    add_header X-XSS-Protection "1; mode=block" always;
    # Optional: Don't log access to assets
    access_log off;
}
location ~ \.(?:png|html|ttf|ico|jpg|jpeg|bcmap)$ {
    try_files $uri /index.php$request_uri;
    # Optional: Don't log access to other assets
    access_log off;
}
}
</code></pre>
<p>启动各项服务：<code>sudo systemctl restart nginx php7.3-fpm redis-server mariadb</code>。如果系统安装了防火墙，记得放行80端口；<br>打开浏览器，在地址栏输入树莓派的ip，例如：<a target="_blank" rel="noopener" href="http://192.168.1.2,将出现nextcloud的设置页面,选择用户名和密码,以及输入数据库用户名和密码,完成设置./">http://192.168.1.2，将出现nextcloud的设置页面，选择用户名和密码，以及输入数据库用户名和密码，完成设置。</a><br>设置完成后，进入了类似百度云盘的操作界面，说明云盘已经初步搭建好了。<br>配置nextcloud，使其性能更好：打开**/var/www/html/nextcloud/config/config.php**文件，在最后的);前添加缓存配置： <code>'memcache.local' =&gt; '\OC\Memcache\Redis','memcache.distributed' =&gt; '\OC\Memcache\Redis','redis' =&gt; ['host' =&gt; 'localhost','port' =&gt; 6379,'dbindex' =&gt; 0,'password' =&gt; '','timeout' =&gt; 1.5,],</code><br>至此，nextcloud的部署和设置全部完毕，在浏览器界面已经能够查看和管理各种数据和功能了。</p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><ol>
<li>树莓派默认的sd卡存储空间很小，实践应该将nextcloud的程序文件托管在外置硬盘上；</li>
<li>设置外网访问需要用到域名、dns、https配置以及内网穿透，本文不再给出；</li>
<li>各平台客户端的设置和使用请参考官方教程，本文不再给出<br>启动树莓派，你需要一个显示器，并且连接上键盘，登陆系统用户名pi，密码raspberry。安装openssh-server， 并且使用service ssh start启动ssh-server服务。这可以确保你可以使用ssh远程连接到树莓派。</li>
</ol>
<h1 id="安装kodi"><a href="#安装kodi" class="headerlink" title="安装kodi"></a>安装kodi</h1><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.kodiplayer.cn/course/2902.html">使用树莓派安装Kodi打造家庭影院 </a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/nginx-install-setup.html">Nginx 安装配置 | 菜鸟教程</a><br><a target="_blank" rel="noopener" href="https://www.lxx1.com/3696">树莓派安装 lnmp 套件搭建个人博客网站服务器 | 科技爱好者博客 -专注于树莓派（Raspberry Pi）</a></p>
</blockquote>
<p>安装 <a target="_blank" rel="noopener" href="https://github.com/kodi-pvr">pvr client</a><br>配置 kodi 自动启动</p>
<p>启动 kodi</p>
<pre><code>$ service kodi start
</code></pre>
<h1 id="安装qbittorrent"><a href="#安装qbittorrent" class="headerlink" title="安装qbittorrent"></a>安装qbittorrent</h1><h3 id="安装qBittorrent"><a href="#安装qBittorrent" class="headerlink" title="安装qBittorrent"></a>安装qBittorrent</h3><pre class=" language-text"><code class="language-text">sudo apt install -y qbittorrent-nox
</code></pre>
<p>如果提示未找到软件的话可以先update一下：</p>
<pre class=" language-text"><code class="language-text">sudo apt update
</code></pre>
<h3 id="启动qbittorrent"><a href="#启动qbittorrent" class="headerlink" title="启动qbittorrent"></a>启动qbittorrent</h3><pre class=" language-text"><code class="language-text">qbittorrent-nox -d
</code></pre>
<p>这时候，我们就可以打开浏览器，输入你树莓派的ip地址，qbittorrent默认webui的端口号为8080，比如：</p>
<pre class=" language-text"><code class="language-text">你的树莓派ip:8080
</code></pre>
<p>默认账号<code>admin</code> 和密码 <code>adminadmin</code></p>
<h3 id="服务开机自启"><a href="#服务开机自启" class="headerlink" title="服务开机自启"></a>服务开机自启</h3><p>以上就是这个教程最核心的部分了。还有一个问题就是如何让这个服务开机自启，一般来说有两个办法。</p>
<h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>一个是利用rc.lcal脚本，再exit 0前面加入：</p>
<pre><code>vim /etc/rc.local
</code></pre>
<pre class=" language-text"><code class="language-text">qbittorrent-nox -d
</code></pre>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><p>另一个方法是将qbittorrent加入到系统服务中。首先，用vim创建一个文件</p>
<pre class=" language-text"><code class="language-text">vim /etc/systemd/system/qbittorrent.service
</code></pre>
<p>在文件中写入以下内容：</p>
<pre class=" language-vim"><code class="language-vim"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
Description<span class="token operator">=</span>qBittorrent Daemon Service
After<span class="token operator">=</span>network<span class="token operator">.</span>target
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
User<span class="token operator">=</span><span class="token builtin">pi</span>
ExecStart<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span><span class="token builtin">bin</span><span class="token operator">/</span>qbittorrent<span class="token operator">-</span>nox
ExecStop<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span><span class="token builtin">bin</span><span class="token operator">/</span>killall <span class="token operator">-</span><span class="token keyword">w</span> qbittorrent<span class="token operator">-</span>nox
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
WantedBy<span class="token operator">=</span>multi<span class="token operator">-</span>user<span class="token operator">.</span>target
</code></pre>
<p>然后，用systemctl命令重新载入daemon：</p>
<pre class=" language-octave"><code class="language-octave">systemctl daemon-reload
</code></pre>
<p>到这里，你就可以使用systemctl命令来查看、启动、停止qbittorrent服务了。如果要让它开机自启，只需要输入以下命令：</p>
<pre class=" language-text"><code class="language-text">systemctl enable qbittorrent-nox.service
</code></pre>
<h1 id="安装openwrt作为路由器"><a href="#安装openwrt作为路由器" class="headerlink" title="安装openwrt作为路由器"></a>安装openwrt作为路由器</h1><p>openwrt 安装</p>
<pre class=" language-bash"><code class="language-bash">opkg update 
opkg <span class="token function">install</span> 
opkg <span class="token function">install</span> lsblk <span class="token function">cfdisk</span> luci luci-base luci-compat block-mount
opkg <span class="token function">install</span> luci luci-base luci-compat
opkg <span class="token function">install</span> block-mount 

opkg <span class="token function">install</span> docker-ce
/tmp下文件 添加 GUI
luci-lib-docker_v0.3.2_all.ipk
luci-app-dockermon_v0.5.7_all.ipk 
luci-i18n-base-zh 中文
</code></pre>
<p>格式化</p>
<pre class=" language-bash"><code class="language-bash">mkfs.ext4 /dev/sda3 
</code></pre>
<p>挂载点</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv9714518">树莓派4B 亲手打造一款Openwrt软路由(带编译固件-超详细) - RaspberryPi硬核系列(三) - 哔哩哔哩</a></p>
<p>挂载overlay </p>
<pre class=" language-bash"><code class="language-bash">// disk 
<span class="token function">fdisk</span> -l 
<span class="token function">cfdisk</span> /dev/mmcblk
opkg <span class="token function">install</span> <span class="token function">cfdisk</span>
mkfs.ext4 /dev/sda3
<span class="token function">mount</span> /dev/sda3 /mnt/sda3
<span class="token function">cd</span> /overlay 
<span class="token function">ls</span> 
<span class="token function">cp</span> -r /overlay/* /mnt/sda3
<span class="token function">ls</span> /mnt/sda3
系统挂载目录
</code></pre>
<p>docke 安装emby-server </p>
<pre><code>// 拉取镜像
docker pull emby/embyserver:latest
// 容器运行环境
// 新建容器 条件按钮 开始配置新的容器参数
emby
绑定挂载
配置文件目录
媒体文件目录
设备
// 启动容器
</code></pre>
<p>error</p>
<pre class=" language-bash"><code class="language-bash">/opt/docker/tmp/GetImageBlob924900034 no such <span class="token function">file</span> or directory 

no space left on device

docker -d 启动 查看异常现象
<span class="token function">cd</span> /var/lib/docker
<span class="token function">mkdir</span> tmp
</code></pre>
<pre><code>docker run -d \
    --name=emby \
    --volume /mnt/mmcblk0p3/docker/emby_lib:/config \                   
    --volume /mnt/mmcblk0p3/server:/movies \                                    
    --device /dev/dri/renderD128 \
    --publish 8096:8096 \
    --publish 8920:8920 \
    --env UID=1000 \
    --env GID=100 \
    --env GIDLIST=100 \
    emby/embyserver:latest
</code></pre>
<h1 id="安装DNS"><a href="#安装DNS" class="headerlink" title="安装DNS"></a>安装DNS</h1><p>树莓派上安装Pi-hole搭建DNS服务器，过滤网页广告 | 科技爱好者博客 -专注于树莓派（Raspberry Pi）<br><a target="_blank" rel="noopener" href="https://www.lxx1.com/2422">https://www.lxx1.com/2422</a><br>使用SFTP远程传输树莓派文件 | 树莓派实验室<br><a target="_blank" rel="noopener" href="https://shumeipai.nxez.com/2013/09/07/use-the-remote-sftp-file-transfer-raspberry-pi.html">https://shumeipai.nxez.com/2013/09/07/use-the-remote-sftp-file-transfer-raspberry-pi.html</a><br>只需在“快速连接”中输入：<br>主机：s<a href="ftp://192.168.1.102/">ftp://192.168.1.102</a> （换成您的树莓派的IP地址。前面的sftp://一定要加）<br>用户名和密码照实填。（Raspbian默认是pi/raspberry）</p>
<h1 id="安装ftp"><a href="#安装ftp" class="headerlink" title="安装ftp"></a>安装ftp</h1><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/A_lPha/article/details/53116767?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase">新手入门树莓派必做的四件事</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/101616464">树莓派打造北邮人种子下载机——下载、做种一条龙全站式教程 - 知乎</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/105741032">全平台免费同步神器——syncthing - 知乎</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.tianjinkun.com/post/31.html">树莓派也玩大数据之服务器性能可视化【二】–【部署Telegraf及配置Grafana】-轩辕阁</a></p>
<p><a target="_blank" rel="noopener" href="https://make.quwj.com/project/10">Pi Dashboard (Pi 仪表盘) - MAKE 趣无尽</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bc8cee1946ce">树莓派docker 搭建owncloud个人云盘 - 简书</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/NIeson2012/article/details/99683718">(30条消息)树莓派4B新手篇：安装官网Raspbian Buster系统及基础配置_Nieson2012的专栏-CSDN博客_树莓派4b</a></p>
<p><a target="_blank" rel="noopener" href="https://inathan.wang/index.php/archives/69/">树莓派打造家庭中心服务小记 - iNathan - 个人站</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/A_lPha/article/details/53116767?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.nonecase">(30条消息)新手入门树莓派必做的四件事_简讯的读书笔记-CSDN博客_新手入门树莓派必做的四件事</a></p>
<p>树莓派能用来做啥？ | 树莓派实验室 <a target="_blank" rel="noopener" href="https://shumeipai.nxez.com/what-raspi-used-forra">https://shumeipai.nxez.com/what-raspi-used-forra</a></p>
<p>(15条消息)树莓派 raspberry 4B系统 VNC View 连接 Cannot currently show the desktop 错误解决_操作系统_hu5566798的博客-CSDN博客 <a target="_blank" rel="noopener" href="https://blog.csdn.net/hu5566798/article/details/98756911">https://blog.csdn.net/hu5566798/article/details/98756911</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zbr794866300/article/details/98983749">(30条消息)树莓派设置固定IP地址的方法（亲测有效）_zbr794866300的博客-CSDN博客_树莓派固定ip</a></p>
<p>(15条消息)树莓派 raspberry 4B系统 VNC View 连接 Cannot currently show the desktop 错误解决_操作系统_hu5566798的博客-CSDN博客<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hu5566798/article/details/98756911">https://blog.csdn.net/hu5566798/article/details/98756911</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dxm809/article/details/103799537">(30条消息)E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarly unavailable)_dxm809的博客-CSDN博客_e: could not get lock /var/lib/dpkg/lock-frontend</a></p>
<p>b/dpkg/lock-frontend - open (13: 权限不够)E: 无法获取 dpkg 前端锁 (/var/lib/dpkg/lock-frontend)，请查看您是否正以 root 用户运行？ - 不肥的死肥宅 - 博客园](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/2sheep2simple/p/10611170.html">https://www.cnblogs.com/2sheep2simple/p/10611170.html</a>)</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yushuo/p/12018926.html">树莓派4安装ftp服务端 - Easy_Cms - 博客园</a></p>
<p>使用SFTP远程传输树莓派文件 | 树莓派实验室<br><a target="_blank" rel="noopener" href="https://shumeipai.nxez.com/2013/09/07/use-the-remote-sftp-file-transfer-raspberry-pi.html">https://shumeipai.nxez.com/2013/09/07/use-the-remote-sftp-file-transfer-raspberry-pi.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/aa13058219642/article/details/88629803">(29条消息)NAS 详细搭建方案 -安装NextCloud_A.A的博客-CSDN博客_nextcloud</a></p>
<p><a target="_blank" rel="noopener" href="https://tlanyan.me/raspberry-pi-install-nextcloud/">树莓派安装nextcloud搭建私有云 - tlanyan</a></p>
<p><a target="_blank" rel="noopener" href="https://shumeipai.nxez.com/2019/05/20/how-to-install-docker-on-your-raspberry-pi.html">树莓派上 Docker 的安装和使用 | 树莓派实验室</a></p>
<p>树莓派能用来做啥？ | 树莓派实验室<br><a target="_blank" rel="noopener" href="https://shumeipai.nxez.com/what-raspi-used-forra">https://shumeipai.nxez.com/what-raspi-used-forra</a><br>(15条消息)树莓派 raspberry 4B系统 VNC View 连接 Cannot currently show the desktop 错误解决_操作系统_hu5566798的博客-CSDN博客<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hu5566798/article/details/98756911">https://blog.csdn.net/hu5566798/article/details/98756911</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/NIeson2012/article/details/99683718">(30条消息)树莓派4B新手篇：安装官网Raspbian Buster系统及基础配置_Nieson2012的专栏-CSDN博客_树莓派4b</a></p>
</blockquote>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">记住</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://heweiliang88.github.io/2020/07/24/%E7%88%B1%E5%A5%BD/%E6%A0%91%E8%8E%93%E6%B4%BE/">https://heweiliang88.github.io/2020/07/24/%E7%88%B1%E5%A5%BD/%E6%A0%91%E8%8E%93%E6%B4%BE/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">记住</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/">
                                    <span class="chip bg-color">树莓派</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid="></script>
    <div class="addthis_inline_share_toolbox"></div>
    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    
    <div class="livere-card card" data-aos="fade-up">
    <!-- 来必力City版安装代码 -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC81MDY1MC8yNzEzMw==">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活JavaScript。</noscript>
    </div>
    <!-- City版安装代码已完成 -->
</div>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/07/24/%E5%89%8D%E7%AB%AF/typescript/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="简单了解typescript的基础语法">
                        
                        <span class="card-title">简单了解typescript的基础语法</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-07-24
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/typescript/">
                        <span class="chip bg-color">typescript</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/07/24/%E5%89%8D%E7%AB%AF/react/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/11.jpg" class="responsive-img" alt="简单了解react的相关知识">
                        
                        <span class="card-title">简单了解react的相关知识</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-07-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%89%8D%E7%AB%AF/" class="post-category">
                                    前端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/react/">
                        <span class="chip bg-color">react</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="2829816518"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.5'
                   list-folded='false'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2018-2021</span>
            
            <a href="/about" target="_blank">记住</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">287.2k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2018";
                        var startMonth = "10";
                        var startDate = "28";
                        var startHour = "9";
                        var startMinute = "10";
                        var startSecond = "30";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            

            <img src="https://gitee.com/marmalade0/images/blob/master/www.marmalade.vip/beian.png"> <a
                href="http://www.beian.miit.gov.cn/" style="color:#f72b07" target="_blank">你自己的备案号，如粤公网安备123456号</a>
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/heweiliang88?tab=repositories" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:15816073129@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>



    <a href="https://www.facebook.com/xxx" class="tooltipped" target="_blank" data-tooltip="关注我的Facebook: https://www.facebook.com/xxx" data-position="top" data-delay="50">
        <i class="fab fa-facebook-f"></i>
    </a>



    <a href="https://twitter.com/xxx" class="tooltipped" target="_blank" data-tooltip="关注我的Twitter: https://twitter.com/xxx" data-position="top" data-delay="50">
        <i class="fab fa-twitter"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=15816073129" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 15816073129" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/xxx" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/xxx" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/xxx" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/xxx" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/"><\/script>');
            }
        </script>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
